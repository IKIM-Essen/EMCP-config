---
- hosts: teleport_proxy
  environment: "{{ proxy_env | default({}) }}"
  roles:
    - teleport_proxy

- hosts: primary_rke_server
  environment: "{{ proxy_env | default({}) }}"
  roles:
    - k8s_teleport_agent

# Before deploying, add an entry in the {{ teleport_apps }} list.
- hosts: primary_rke_server
  environment: "{{ proxy_env | default({}) }}"
  vars:
    labelstudio_public_url: https://kiadeku-label.{{ teleport_proxy_host }}"
  roles:
    - k8s_labelstudio

# Before deploying, add an entry in the {{ teleport_apps }} list.
- hosts: primary_rke_server
  environment: "{{ proxy_env | default({}) }}"
  vars:
    k8s_deployment_name: kiadeku-api
    k8s_deployment_namespace: kiadeku-api
    k8s_deployment_container_registry: git.uni-due.de:6666
    k8s_deployment_container_image_name: tio/projects/kiadeku-deployment:0.0.1
    k8s_deployment_configmap_env: {}
    k8s_deployment_secret_env: {}
  roles:
    - k8s_generic_deployment
