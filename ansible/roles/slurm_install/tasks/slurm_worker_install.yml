---
- name: Download the deb packages
  ansible.builtin.get_url:
    url: "{{ slurm_worker_package_base_url }}/{{ slurm_install_item }}"
    dest: /tmp/"{{ slurm_install_item }}"
    owner: root
    group: root
    mode: "0644"
  loop: "{{ slurm_worker_package_names }}"
  loop_control:
    loop_var: slurm_install_item

- name: Install the worker daemon and client tools
  ansible.builtin.apt:
    name: "{{ slurm_worker_package_names | map('regex_replace', '^', '/tmp/') | list }}"
    state: present
    update_cache: true
