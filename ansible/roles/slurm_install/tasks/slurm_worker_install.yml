---
- name: Download the deb packages
  ansible.builtin.unarchive:
    src: "{{ slurm_worker_debs_url }}"
    dest: /tmp
    remote_src: true

# The apt module can't be used because it doesn't handle the installation of
# multiple local deb packages in the same transaction.
- name: Install the worker daemon and client tools
  environment:
    DEBIAN_FRONTEND: noninteractive
  ansible.builtin.command: "apt-get -y install {{ slurm_worker_package_paths | map('regex_replace', '^', '/tmp/') | join(' ') }}"
  changed_when: true
