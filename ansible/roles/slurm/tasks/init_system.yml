- name: See if systemd is runing
  ansible.builtin.command: systemctl
  changed_when: false
  failed_when: false
  register: cmd_systemctl

- name: Indicate that systemd is the init system
  ansible.builtin.set_fact:
    init_system: systemd
  when: cmd_systemctl['rc'] == 0

- name: If the init system is not systemd, assume supervisord
  ansible.builtin.set_fact:
    init_system: supervisord
  when: cmd_systemctl['rc'] != 0
